# `hermes history` コマンド

`hermes history` コマンドは、`hermes run` で実行されたタスクの履歴を管理するために使用されます。

## 機能

このコマンドは、ワークスペースの `history` ディレクトリに保存されている実行結果（メタデータとレポート）を操作します。

-   **履歴一覧**: 過去の実行履歴をテーブル形式で表示します。タスクID、実行ステータス（成功/失敗）、実行時間、使用モデルなどの詳細が含まれます。
-   **レポートのエクスポート**: 過去に生成されたレポートファイルを、指定したパスにコピーします。
-   **履歴の削除**: 指定したタスクIDの実行履歴（メタデータとレポートファイル）を削除します。

## オプション

| オプション | 説明 |
| :--- | :--- |
| `--limit INT` | 表示する履歴の最大件数を指定します。 |
| `--export "TASK_ID:PATH"` | 指定した `TASK_ID` のレポートを、指定した `PATH` にエクスポート（コピー）します。コロン `:` で区切ります。 |
| `--delete "TASK_ID"` | 指定した `TASK_ID` の履歴を削除します。 |
| `--work-dir PATH` | ワークディレクトリのパスを指定します。デフォルトは `~/.hermes` です。 |

## 実装詳細

-   **CLIフレームワーク**: `click`
-   **サービス**: `hermes_cli.services.history_service.HistoryService`
-   **メインロジック**:
    1.  `HistoryService` を初期化します。このサービスが履歴ファイルの読み書きや削除を担当します。
    2.  `--export` オプションが指定された場合:
        -   引数を `TASK_ID` と `PATH` に分割します。
        -   `HistoryService.export_report()` を呼び出し、対応するレポートファイルを指定されたパスにコピーします。
    3.  `--delete` オプションが指定された場合:
        -   `HistoryService.delete_history()` を呼び出し、指定されたIDに対応するメタデータファイルとレポートファイルを削除します。
    4.  上記のオプションがどちらも指定されていない場合（一覧表示）:
        -   `HistoryService.list_histories()` を呼び出し、`history` ディレクトリからすべての実行履歴メタデータを読み込みます。
        -   `rich.table.Table` を使用して、履歴の一覧を整形されたテーブルで表示します。ステータスに応じて色分けも行います。
