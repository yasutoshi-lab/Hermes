# `hermes log` コマンド

`hermes log` コマンドは、Hermesアプリケーションの動作ログを表示するために使用されます。

## 機能

このコマンドは、ワークスペース内の `log` または `debug_log` ディレクトリに保存されているログファイルを読み込み、コンソールに出力します。`tail` コマンドのように、ログの末尾を表示したり、リアルタイムで追跡したりする機能を提供します。

-   **通常ログ表示**: デフォルトで、主要なイベントが記録された通常ログ (`hermes.log`) を表示します。
-   **デバッグログ表示**: `--debug` フラグを指定すると、より詳細な情報を含むデバッグログ (`hermes_debug.log`) を表示します。
-   **リアルタイム追跡**: `--follow` フラグを使用すると、ログファイルを監視し、新しいログが書き込まれるたびにリアルタイムで表示し続けます（Ctrl+Cで終了）。
-   **タスクIDフィルタリング**: `--task-id` を指定すると、特定のタスクに関連するログのみをフィルタリングして表示できます。

## オプション

| オプション | 短縮形 | 説明 | デフォルト値 |
| :--- | :--- | :--- | :--- |
| `--lines` | `-n` | 表示するログの末尾からの行数を指定します。 | 50 |
| `--follow` | `-f` | ログファイルを監視し、新しいログをリアルタイムで表示します。 | N/A |
| `--task-id TEXT` | 指定されたタスクIDに関連するログのみをフィルタリングして表示します。 | N/A |
| `--debug` | | 通常ログの代わりに、詳細なデバッグログを表示します。 | N/A |
| `--work-dir PATH` | | ワークディレクトリのパスを指定します。 | `~/.hermes` |

## 実装詳細

-   **CLIフレームワーク**: `click`
-   **サービス**: `hermes_cli.services.log_service.LogService`
-   **メインロジック**:
    1.  `LogService` を初期化します。
    2.  `log_service.read_logs()` メソッドを呼び出します。このメソッドはジェネレータであり、ログの各行を順次返します。
    3.  `read_logs` メソッドの内部で、オプションに応じて以下の処理を行います。
        -   `--debug` フラグに基づいて、読み込むログファイル（通常ログかデバッグログか）を決定します。
        -   `--follow` フラグが指定されている場合、ファイルの末尾を監視し、新しい行が追加されるのを待ちます。
        -   `--task-id` が指定されている場合、ログ行にタスクIDが含まれているかチェックし、一致するもののみを返します。
    4.  受け取った各ログ行をコンソールに出力します。
    5.  `--follow` モード中に `KeyboardInterrupt` (Ctrl+C) が発生した場合、追跡を停止します。
